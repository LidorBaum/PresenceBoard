(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{117:function(e,a){},131:function(e,a,t){},132:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(35),o=t.n(r),l=t(3),s=t(2),u=t(14),i=Object(n.createContext)(null),m=t(1),p=t.n(m),d=t(60),g=t.n(d).a.create({withCredentials:!0});g.defaults.withCredentials=!0;var f=function(e,a){return h(e,"GET",a)},E=function(e,a){return h(e,"POST",a)},y=function(e,a){return h(e,"PUT",a)},v=function(e,a){return h(e,"DELETE",a)};function h(e){var a,t,n,c=arguments;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"get",t=c.length>2&&void 0!==c[2]?c[2]:null,r.prev=2,r.next=5,p.a.awrap(g({url:"".concat("/api/").concat(e),method:a,data:t}));case 5:return n=r.sent,r.abrupt("return",n.data);case 9:if(r.prev=9,r.t0=r.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat("/api/").concat(e,", with data: ").concat(t)),console.dir(r.t0),!r.t0.response||401!==r.t0.response.status){r.next=17;break}window.location.assign("/#/login"),r.next=18;break;case 17:throw r.t0;case 18:case"end":return r.stop()}}),null,null,[[2,9]])}var b=t(12),w=t.n(b),C={loginCompany:function(e){var a;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(E("auth/login",e));case 2:return a=t.sent,t.abrupt("return",N(a));case 4:case"end":return t.stop()}}))},logoutCompany:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.awrap(E("auth/logout"));case 2:w.a.remove("loggedCompany"),sessionStorage.clear();case 4:case"end":return e.stop()}}))},signupCompany:function(e){var a;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(E("auth/signup",e));case 2:return a=t.sent,t.abrupt("return",N(a));case 4:case"end":return t.stop()}}))},getCompanies:function(){return f("company")},getCompanyById:function(e){return f("company/".concat(e))},removeCompany:function(e){return v("company/".concat(e))},updateCompany:function(e){return y("company/edit/".concat(e._id),e)}};function N(e){return sessionStorage.setItem("company",JSON.stringify(e)),e}var x=function(e){Object(n.useContext)(i).loggedCompany;var a=Object(u.f)();return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("h1",null,"Welcome to Presence Board"),c.a.createElement("h2",null,"Here you can see who is prescense in a bit of a second")),c.a.createElement("div",{className:"cta-container"},c.a.createElement("div",null,c.a.createElement("h2",null,"Your company is registered?"),c.a.createElement("button",{onClick:function(){a.push("/login")}},"Log in now!")),c.a.createElement("div",null,c.a.createElement("h2",null,"New here? add your company"),c.a.createElement("button",{onClick:function(){a.push("/login?newCompany=1")}},"Register Now!"))),c.a.createElement("div",null,"HELLO"),c.a.createElement("button",{onClick:function(){var e;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(C.getCompanies());case 2:e=a.sent,console.log(e);case 4:case"end":return a.stop()}}))}},"RETRIEVE"))},O={getAllEmployees:function(){return f("employee")},getEmployeeById:function(e){return f("employee/".concat(e))},removeEmployee:function(e){return v("employee/".concat(e))},updateEmployee:function(e){return y("employee/edit/".concat(e._id),e)},addEmployee:function(e){return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(E("employee",e));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))},getAllEmployeesInCompany:function(e){return f("employee/company/".concat(e))},updateEmployeePresence:function(e,a){return console.log(e,a),y("employee/presence",{employeeId:e,isPresence:a})}};var j=t(36),I=t.n(j);function S(e){var a=e.emp,t=e.onChangePresence,r=Object(n.useState)(!1),o=Object(l.a)(r,2),s=o[0],u=o[1];return c.a.createElement("article",{id:"".concat(a._id,"-card"),className:"employee-card",onClick:function(){return e=a._id,p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("HERE?"),u(!0),a.next=4,p.a.awrap(t(e));case 4:u(!1);case 5:case"end":return a.stop()}}));var e}},c.a.createElement("div",{className:"click-loader"},s&&c.a.createElement(I.a,{width:"100px",height:"100px"})),c.a.createElement("p",null,a.firstName+" "+a.lastName),c.a.createElement("img",{id:a._id,src:a.image,alt:"profile",className:[a.isPresence?"color":"gray","employee-card-img"].join(" ")}))}var k=function(e){var a=e.employees,t=e.onChangePresence;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"employee-list"},a.map((function(e){return c.a.createElement(S,{onChangePresence:t,key:e._id,emp:e})}))))},_=t(27),L=t.n(_);var P=L()(),A=function(e){var a=Object(u.f)(),t=Object(n.useContext)(i),r=t.loggedCompany,o=t.setLoggedCompany,s=Object(n.useState)(null),m=Object(l.a)(s,2),d=m[0],g=m[1],f=Object(n.useState)(!1),E=Object(l.a)(f,2),y=E[0],v=E[1];Object(n.useEffect)((function(){!function(){var e;p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(r){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,p.a.awrap(O.getAllEmployeesInCompany(r.id));case 4:e=a.sent,console.log(e,"res"),g(e);case 7:case"end":return a.stop()}}))}()}),[r,y]),Object(n.useEffect)((function(){r&&P.emit("board_page",r.id)}),[P,r]);return Object(n.useEffect)((function(){P.on("update_board",(function(e){!function(e){var a,t,n;p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=e.companyId,t=e.employeeId,console.log("I NEED TO REFRESH"),document.getElementById("".concat(t)).classList.toggle("gray"),c.next=5,p.a.awrap(O.getAllEmployeesInCompany(a));case 5:n=c.sent,console.log(n,"res"),g(n);case 8:case"end":return c.stop()}}))}({companyId:e.companyId,employeeId:e.employeeId})}))}),[P]),r?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.awrap(C.logoutCompany());case 2:o(null),a.push("/");case 4:case"end":return e.stop()}}))}},"Logout")),c.a.createElement("img",{className:"board-logo-img",src:r.logo}),c.a.createElement("div",{className:"board-container"},d?c.a.createElement(k,{onChangePresence:function(e){var a;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,document.getElementById("".concat(e)).classList.toggle("gray"),t.next=5,p.a.awrap(O.updateEmployeePresence(e));case 5:return a=t.sent,console.log(a),t.next=9,p.a.awrap(P.emit("update_board",{companyId:r.id,employeeId:e}));case 9:setTimeout((function(){return v(!y)}),1200),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),null,null,[[1,12]])},employees:d}):c.a.createElement("div",null,"LOADING"))):c.a.createElement("div",null,"Loading...")},B=t(13),F=t(20),T=t(15),D=t.n(T),R=function(e){var a=Object(u.f)(),t=Object(n.useContext)(i),r=t.loggedCompany,o=t.setLoggedCompany;r&&a.push("/board");var s=Object(n.useRef)(null),m=Object(n.useState)(null),d=Object(l.a)(m,2),g=d[0],f=d[1],E=Object(n.useState)(""),y=Object(l.a)(E,2),v=(y[0],y[1],Object(n.useState)({companyId:"",password:""})),h=Object(l.a)(v,2),b=h[0],w=h[1],N=Object(n.useState)({companyName:"",password:""}),x=Object(l.a)(N,2),O=x[0],j=x[1];Object(n.useEffect)((function(){var a=document.getElementById("signUp"),t=document.getElementById("signIn"),n=document.getElementById("container");a.addEventListener("click",(function(){n.classList.add("right-panel-active")})),t.addEventListener("click",(function(){n.classList.remove("right-panel-active")})),new URLSearchParams(e.location.search).get("newCompany")&&s.current.click()}),[]),Object(n.useEffect)((function(){!function(){var e,a;p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(C.getCompanies());case 2:e=t.sent,a=[],console.log(e),e.forEach((function(e){a.push({label:e.name,value:e._id})})),f(a);case 7:case"end":return t.stop()}}))}()}),[]);var I=function(e){e.persist();var a=e.target.name,t=e.target.value;j((function(e){return Object(F.a)({},e,Object(B.a)({},a,t))}))};return c.a.createElement("div",{className:"login-signup-page"},c.a.createElement("div",{className:"container",id:"container"},c.a.createElement("div",{className:"form-container sign-up-container"},c.a.createElement("form",{action:"#",onSubmit:function(e){var a,t,n;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e.preventDefault(),console.log("check"),a=O.companyName,t=O.password,a&&t){c.next=5;break}return c.abrupt("return",console.log("missing creds"));case 5:return c.next=7,p.a.awrap(C.signupCompany({name:a,password:t}));case 7:n=c.sent,o(n),console.log("signedupSucces");case 10:case"end":return c.stop()}}))}},c.a.createElement("h1",null,"Create Account"),c.a.createElement("span",null,"Enter your company's name"),c.a.createElement("input",{name:"companyName",value:O.companyName,onChange:I,type:"text",placeholder:"Company Name"}),c.a.createElement("input",{name:"password",value:O.password,onChange:I,type:"password",placeholder:"Password"}),c.a.createElement("button",null,"Sign Up"))),c.a.createElement("div",{className:"form-container sign-in-container"},c.a.createElement("form",{action:"#",onSubmit:function(e){var a,t,n;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e.preventDefault(),console.log("doLogin"),a=b.companyId,t=b.password,console.log(b),a&&t){c.next=6;break}return c.abrupt("return",console.log("missing creds"));case 6:return c.next=8,p.a.awrap(C.loginCompany({companyId:a,password:t}));case 8:n=c.sent,o(n),console.log("signedupSucces");case 11:case"end":return c.stop()}}))}},c.a.createElement("h1",null,"Sign in"),c.a.createElement("div",{className:"selectCompany"},c.a.createElement(D.a,{options:g,values:b.company,onChange:function(e){return function(e){var a=e[0];w((function(e){return Object(F.a)({},e,{companyId:a.value})}))}(e)}})),c.a.createElement("input",{name:"password",value:b.password,onChange:function(e){e.persist();var a=e.target.name,t=e.target.value;w((function(e){return Object(F.a)({},e,Object(B.a)({},a,t))})),console.log(b)},type:"password",placeholder:"Password"}),c.a.createElement("button",null,"Sign In"))),c.a.createElement("div",{className:"overlay-container"},c.a.createElement("div",{className:"overlay"},c.a.createElement("div",{className:"overlay-panel overlay-left"},c.a.createElement("h1",null,"Welcome Back!"),c.a.createElement("p",null,"To see who is here, please login"),c.a.createElement("button",{className:"ghost",id:"signIn"},"Sign In")),c.a.createElement("div",{className:"overlay-panel overlay-right"},c.a.createElement("h1",null,"Hello, New Company!"),c.a.createElement("p",null,"Enter your company's name and join us!"),c.a.createElement("button",{ref:s,className:"ghost",id:"signUp"},"Sign Up"))))))};function q(e){var a,t,n,c;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return"echoshare",a="https://api.cloudinary.com/v1_1/".concat("echoshare","/auto/upload"),(t=new FormData).append("file",e.target.files[0]),t.append("upload_preset","echoshareImgs"),r.prev=5,r.next=8,p.a.awrap(fetch(a,{method:"POST",body:t}));case 8:return n=r.sent,r.next=11,p.a.awrap(n.json());case 11:return c=r.sent,console.log(c),r.abrupt("return",c.secure_url);case 16:r.prev=16,r.t0=r.catch(5),console.log(r.t0);case 19:case"end":return r.stop()}}),null,null,[[5,16]])}var H=function(e){var a=Object(n.useState)({firstName:"",lastName:""}),t=Object(l.a)(a,2),r=t[0],o=t[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),i=u[0],m=u[1],d=function(e){e.persist();var a=e.target.name,t=e.target.value;o((function(e){return Object(F.a)({},e,Object(B.a)({},a,t))}))},g=Object(n.useState)("https://res.cloudinary.com/echoshare/image/upload/v1634132726/productImgs/799-7998561_add-photo-placeholder-north-luwu-regency_qb0eii.jpg"),f=Object(l.a)(g,2),E=f[0],y=f[1];return c.a.createElement("div",{className:"popup-box"},c.a.createElement("div",{className:"box"},c.a.createElement("span",{className:"close-icon",onClick:e.handleClose},"x"),c.a.createElement("form",{onSubmit:function(a){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),"https://res.cloudinary.com/echoshare/image/upload/v1634132726/productImgs/799-7998561_add-photo-placeholder-north-luwu-regency_qb0eii.jpg"!==E){n.next=4;break}return console.log("You must upload a photo"),n.abrupt("return");case 4:return t={firstName:r.firstName,lastName:r.lastName,image:E,company:e.companyId},console.log(t),n.next=8,p.a.awrap(O.addEmployee(t));case 8:n.sent,e.handleClose();case 10:case"end":return n.stop()}}))}},c.a.createElement("input",{minLength:"5",required:!0,type:"text",name:"firstName",value:r.firstName,placeholder:"Employee First Name",onChange:d}),c.a.createElement("input",{minLength:"5",required:!0,type:"text",name:"lastName",value:r.lastName,placeholder:"Employee Last Name",onChange:d}),c.a.createElement("label",null,c.a.createElement("div",{className:"img-upload"},c.a.createElement("img",{className:"primary-img",src:E})),c.a.createElement("input",{hidden:!0,onChange:function(e){var a;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.persist(),m(!0),t.next=4,p.a.awrap(q(e));case 4:a=t.sent,y(a),m(!1);case 7:case"end":return t.stop()}}))},type:"file"})),c.a.createElement("input",Object(B.a)({type:"text",disabled:i,name:"company-name",value:e.company},"disabled",!0)),c.a.createElement("button",null,"Add"))))};function U(e){var a=e.emp;return(c.a.createElement("tr",null,c.a.createElement("td",null,a.firstName),c.a.createElement("td",null,a.lastName),c.a.createElement("td",{className:"image-cell"},c.a.createElement("img",{src:a.image,alt:"profile",className:"employee-card-img"})," "),c.a.createElement("td",null,c.a.createElement("button",null,c.a.createElement("img",{src:"https://res.cloudinary.com/echoshare/image/upload/v1636982096/Edit_icon__the_Noun_Project_30184_.svg_lvvq3f.png"})),c.a.createElement("button",null,c.a.createElement("img",{src:"https://res.cloudinary.com/echoshare/image/upload/v1636983047/cross-in-circle-in-red-tom-hill-transparent_qohafi.png"})))))}var J=function(e){var a=e.employees;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"table-header"},c.a.createElement("table",{cellPadding:"0",cellSpacing:"0",border:"0"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"First Name"),c.a.createElement("th",null,"Last Name"),c.a.createElement("th",null,"Profile Photo"),c.a.createElement("th",null,"Actions"))))),c.a.createElement("div",{className:"table-content"},c.a.createElement("table",{cellSpacing:"0",cellPadding:"0",border:"0"},c.a.createElement("tbody",null,a.map((function(e){return c.a.createElement(U,{key:e._id,emp:e})}))))))},W=function(e){Object(u.f)();var a=Object(n.useContext)(i),t=a.loggedCompany,r=(a.setLoggedCompany,Object(n.useState)(!1)),o=Object(l.a)(r,2),s=o[0],m=o[1],d=function(){m(!s)},g=Object(n.useState)(null),f=Object(l.a)(g,2),E=f[0],y=f[1];return Object(n.useEffect)((function(){!function(){var e;p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,p.a.awrap(O.getAllEmployeesInCompany(t.id));case 4:e=a.sent,console.log(e,"res"),y(e);case 7:case"end":return a.stop()}}))}()}),[t]),t?c.a.createElement(c.a.Fragment,null,s&&c.a.createElement(H,{companyId:t.id,company:t.name,handleClose:d}),c.a.createElement("div",{className:"profile-container"},c.a.createElement("img",{src:t.logo})),c.a.createElement("button",{onClick:d}," Add new Employee"),c.a.createElement("button",null,"Add Bulk Employees"),E?c.a.createElement(J,{employees:E}):c.a.createElement("div",null,"LOADING")):c.a.createElement("div",null,"Loading...")};function G(e){var a=Object(n.useContext)(i).loggedCompany;Object(n.useEffect)((function(){}),[a]);w.a.get("loggedCompany");return c.a.createElement("div",{className:"header"},c.a.createElement(s.b,{to:"/"},c.a.createElement("img",{src:a?a.logo:"https://res.cloudinary.com/echoshare/image/upload/v1636287815/echo_icon_q1hjeb.png"})),a&&c.a.createElement("div",{className:"company-name"},a.name),c.a.createElement("div",{className:"links"},a&&c.a.createElement(s.b,{activeClassName:"active",to:"/company",exact:!0},"Company Profile"),a&&c.a.createElement(s.b,{activeClassName:"active",to:"/board"},"Board"),!a&&c.a.createElement(s.b,{activeClassName:"active",to:"/login"},"Sign In"),c.a.createElement(s.b,{activeClassName:"active",to:"/about"},"About")))}var Y=function(){var e=Object(n.useState)(null),a=Object(l.a)(e,2),t=a[0],r=a[1];return Object(n.useEffect)((function(){if(!t&&w.a.get("loggedCompany")){var e=w.a.get("loggedCompany").slice(2);r(JSON.parse(e))}}),[t]),c.a.createElement("div",{className:"App"},c.a.createElement(s.a,null,c.a.createElement(i.Provider,{value:{loggedCompany:t,setLoggedCompany:r}},c.a.createElement(G,null),c.a.createElement("div",{className:"content"},c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/",component:x,exact:!0}),c.a.createElement(u.a,{path:"/login",component:R}),c.a.createElement(u.a,{path:"/board",component:A}),c.a.createElement(u.a,{path:"/company",component:W}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(131);o.a.render(c.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},64:function(e,a,t){e.exports=t(132)}},[[64,1,2]]]);
//# sourceMappingURL=main.d2c7322d.chunk.js.map