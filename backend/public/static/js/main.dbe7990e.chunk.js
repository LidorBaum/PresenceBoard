(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{121:function(e,t){},135:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(36),o=a.n(c),l=a(3),s=a(2),u=a(14),i=Object(n.createContext)(null),m=a(1),p=a.n(m),d=a(63),g=a.n(d),f=a(21).baseURL,E="".concat(f,"/api/"),v=g.a.create({withCredentials:!0}),y=function(e,t){return N(e,"GET",t)},h=function(e,t){return N(e,"POST",t)},b=function(e,t){return N(e,"PUT",t)},w=function(e,t){return N(e,"DELETE",t)};function N(e){var t,a,n,r=arguments;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:"get",a=r.length>2&&void 0!==r[2]?r[2]:null,c.prev=2,c.next=5,p.a.awrap(v({url:"".concat(E).concat(e),method:t,data:a}));case 5:return n=c.sent,c.abrupt("return",n.data);case 9:if(c.prev=9,c.t0=c.catch(2),console.log("Had Issues ".concat(t,"ing to the backend, endpoint: ").concat(E).concat(e,", with data: ").concat(a)),console.dir(c.t0),!c.t0.response||401!==c.t0.response.status){c.next=17;break}window.location.assign("/#/login"),c.next=18;break;case 17:throw c.t0;case 18:case"end":return c.stop()}}),null,null,[[2,9]])}var O=a(12),x=a.n(O),C={loginCompany:function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(h("auth/login",e));case 2:return t=a.sent,a.abrupt("return",j(t));case 4:case"end":return a.stop()}}))},logoutCompany:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.awrap(h("auth/logout"));case 2:x.a.remove("loggedCompany"),sessionStorage.clear();case 4:case"end":return e.stop()}}))},signupCompany:function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(h("auth/signup",e));case 2:return t=a.sent,a.abrupt("return",j(t));case 4:case"end":return a.stop()}}))},getCompanies:function(){return y("company")},getCompanyById:function(e){return y("company/".concat(e))},removeCompany:function(e){return w("company/".concat(e))},updateCompany:function(e){return b("company/edit/".concat(e._id),e)}};function j(e){return sessionStorage.setItem("company",JSON.stringify(e)),e}var I=function(e){Object(n.useContext)(i).loggedCompany;var t=Object(u.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to Presence Board"),r.a.createElement("h2",null,"Here you can see who is prescense in a bit of a second")),r.a.createElement("div",{className:"cta-container"},r.a.createElement("div",null,r.a.createElement("h2",null,"Your company is registered?"),r.a.createElement("button",{onClick:function(){t.push("/login")}},"Log in now!")),r.a.createElement("div",null,r.a.createElement("h2",null,"New here? add your company"),r.a.createElement("button",{onClick:function(){t.push("/login?newCompany=1")}},"Register Now!"))),r.a.createElement("div",null,"HELLO"),r.a.createElement("button",{onClick:function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(C.getCompanies());case 2:e=t.sent,console.log(e);case 4:case"end":return t.stop()}}))}},"RETRIEVE"))},_={getAllEmployees:function(){return y("employee")},getEmployeeById:function(e){return y("employee/".concat(e))},removeEmployee:function(e){return w("employee/".concat(e))},updateEmployee:function(e){return b("employee/edit/".concat(e._id),e)},addEmployee:function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(h("employee",e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},getAllEmployeesInCompany:function(e){return y("employee/company/".concat(e))},updateEmployeePresence:function(e,t){return console.log(e,t),b("employee/presence",{employeeId:e,isPresence:t})}};var S=a(37),k=a.n(S);function L(e){var t=e.emp,a=e.onChangePresence,c=Object(n.useState)(!1),o=Object(l.a)(c,2),s=o[0],u=o[1];return r.a.createElement("article",{id:"".concat(t._id,"-card"),className:"employee-card",onClick:function(){return e=t._id,p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("HERE?"),u(!0),t.next=4,p.a.awrap(a(e));case 4:u(!1);case 5:case"end":return t.stop()}}));var e}},r.a.createElement("div",{className:"click-loader"},s&&r.a.createElement(k.a,{width:"100px",height:"100px"})),r.a.createElement("p",null,t.firstName+" "+t.lastName),r.a.createElement("img",{id:t._id,src:t.image,alt:"profile",className:[t.isPresence?"color":"gray","employee-card-img"].join(" ")}))}var P=function(e){var t=e.employees,a=e.onChangePresence;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"employee-list"},t.map((function(e){return r.a.createElement(L,{onChangePresence:a,key:e._id,emp:e})}))))},U=a(28),A=a.n(U);var R=a(21).baseURL,B=A()(R),D=function(e){var t=Object(u.f)(),a=Object(n.useContext)(i),c=a.loggedCompany,o=a.setLoggedCompany,s=Object(n.useState)(null),m=Object(l.a)(s,2),d=m[0],g=m[1],f=Object(n.useState)(!1),E=Object(l.a)(f,2),v=E[0],y=E[1];Object(n.useEffect)((function(){!function(){var e;p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,p.a.awrap(_.getAllEmployeesInCompany(c.id));case 4:e=t.sent,console.log(e,"res"),g(e);case 7:case"end":return t.stop()}}))}()}),[c,v]),Object(n.useEffect)((function(){c&&B.emit("board_page",c.id)}),[B,c]);return Object(n.useEffect)((function(){B.on("update_board",(function(e){!function(e){var t,a,n;p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.companyId,a=e.employeeId,console.log("I NEED TO REFRESH"),document.getElementById("".concat(a)).classList.toggle("gray"),r.next=5,p.a.awrap(_.getAllEmployeesInCompany(t));case 5:n=r.sent,console.log(n,"res"),g(n);case 8:case"end":return r.stop()}}))}({companyId:e.companyId,employeeId:e.employeeId})}))}),[B]),c?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.awrap(C.logoutCompany());case 2:o(null),t.push("/");case 4:case"end":return e.stop()}}))}},"Logout")),r.a.createElement("img",{className:"board-logo-img",src:c.logo}),r.a.createElement("div",{className:"board-container"},d?r.a.createElement(P,{onChangePresence:function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),a.prev=1,document.getElementById("".concat(e)).classList.toggle("gray"),a.next=5,p.a.awrap(_.updateEmployeePresence(e));case 5:return t=a.sent,console.log(t),a.next=9,p.a.awrap(B.emit("update_board",{companyId:c.id,employeeId:e}));case 9:setTimeout((function(){return y(!v)}),1200),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0);case 15:case"end":return a.stop()}}),null,null,[[1,12]])},employees:d}):r.a.createElement("div",null,"LOADING"))):r.a.createElement("div",null,"Loading...")},T=a(13),F=a(20),q=a(15),H=a.n(q),J=function(e){var t=Object(u.f)(),a=Object(n.useContext)(i),c=a.loggedCompany,o=a.setLoggedCompany;c&&t.push("/board");var s=Object(n.useRef)(null),m=Object(n.useState)(null),d=Object(l.a)(m,2),g=d[0],f=d[1],E=Object(n.useState)(""),v=Object(l.a)(E,2),y=(v[0],v[1],Object(n.useState)({companyId:"",password:""})),h=Object(l.a)(y,2),b=h[0],w=h[1],N=Object(n.useState)({companyName:"",password:""}),O=Object(l.a)(N,2),x=O[0],j=O[1];Object(n.useEffect)((function(){var t=document.getElementById("signUp"),a=document.getElementById("signIn"),n=document.getElementById("container");t.addEventListener("click",(function(){n.classList.add("right-panel-active")})),a.addEventListener("click",(function(){n.classList.remove("right-panel-active")})),new URLSearchParams(e.location.search).get("newCompany")&&s.current.click()}),[]),Object(n.useEffect)((function(){!function(){var e,t;p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(C.getCompanies());case 2:e=a.sent,t=[],console.log(e),e.forEach((function(e){t.push({label:e.name,value:e._id})})),f(t);case 7:case"end":return a.stop()}}))}()}),[]);var I=function(e){e.persist();var t=e.target.name,a=e.target.value;j((function(e){return Object(F.a)({},e,Object(T.a)({},t,a))}))};return r.a.createElement("div",{className:"login-signup-page"},r.a.createElement("div",{className:"container",id:"container"},r.a.createElement("div",{className:"form-container sign-up-container"},r.a.createElement("form",{action:"#",onSubmit:function(e){var t,a,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.preventDefault(),console.log("check"),t=x.companyName,a=x.password,t&&a){r.next=5;break}return r.abrupt("return",console.log("missing creds"));case 5:return r.next=7,p.a.awrap(C.signupCompany({name:t,password:a}));case 7:n=r.sent,o(n),console.log("signedupSucces");case 10:case"end":return r.stop()}}))}},r.a.createElement("h1",null,"Create Account"),r.a.createElement("span",null,"Enter your company's name"),r.a.createElement("input",{name:"companyName",value:x.companyName,onChange:I,type:"text",placeholder:"Company Name"}),r.a.createElement("input",{name:"password",value:x.password,onChange:I,type:"password",placeholder:"Password"}),r.a.createElement("button",null,"Sign Up"))),r.a.createElement("div",{className:"form-container sign-in-container"},r.a.createElement("form",{action:"#",onSubmit:function(e){var t,a,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.preventDefault(),console.log("doLogin"),t=b.companyId,a=b.password,console.log(b),t&&a){r.next=6;break}return r.abrupt("return",console.log("missing creds"));case 6:return r.next=8,p.a.awrap(C.loginCompany({companyId:t,password:a}));case 8:n=r.sent,o(n),console.log("signedupSucces");case 11:case"end":return r.stop()}}))}},r.a.createElement("h1",null,"Sign in"),r.a.createElement("div",{className:"selectCompany"},r.a.createElement(H.a,{options:g,values:b.company,onChange:function(e){return function(e){var t=e[0];w((function(e){return Object(F.a)({},e,{companyId:t.value})}))}(e)}})),r.a.createElement("input",{name:"password",value:b.password,onChange:function(e){e.persist();var t=e.target.name,a=e.target.value;w((function(e){return Object(F.a)({},e,Object(T.a)({},t,a))})),console.log(b)},type:"password",placeholder:"Password"}),r.a.createElement("button",null,"Sign In"))),r.a.createElement("div",{className:"overlay-container"},r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"overlay-panel overlay-left"},r.a.createElement("h1",null,"Welcome Back!"),r.a.createElement("p",null,"To see who is here, please login"),r.a.createElement("button",{className:"ghost",id:"signIn"},"Sign In")),r.a.createElement("div",{className:"overlay-panel overlay-right"},r.a.createElement("h1",null,"Hello, New Company!"),r.a.createElement("p",null,"Enter your company's name and join us!"),r.a.createElement("button",{ref:s,className:"ghost",id:"signUp"},"Sign Up"))))))};function M(e){var t,a,n,r;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return"echoshare",t="https://api.cloudinary.com/v1_1/".concat("echoshare","/auto/upload"),(a=new FormData).append("file",e.target.files[0]),a.append("upload_preset","echoshareImgs"),c.prev=5,c.next=8,p.a.awrap(fetch(t,{method:"POST",body:a}));case 8:return n=c.sent,c.next=11,p.a.awrap(n.json());case 11:return r=c.sent,console.log(r),c.abrupt("return",r.secure_url);case 16:c.prev=16,c.t0=c.catch(5),console.log(c.t0);case 19:case"end":return c.stop()}}),null,null,[[5,16]])}var V=function(e){var t=Object(n.useState)({firstName:"",lastName:""}),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),i=u[0],m=u[1],d=function(e){e.persist();var t=e.target.name,a=e.target.value;o((function(e){return Object(F.a)({},e,Object(T.a)({},t,a))}))},g=Object(n.useState)("https://res.cloudinary.com/echoshare/image/upload/v1634132726/productImgs/799-7998561_add-photo-placeholder-north-luwu-regency_qb0eii.jpg"),f=Object(l.a)(g,2),E=f[0],v=f[1];return r.a.createElement("div",{className:"popup-box"},r.a.createElement("div",{className:"box"},r.a.createElement("span",{className:"close-icon",onClick:e.handleClose},"x"),r.a.createElement("form",{onSubmit:function(t){var a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),"https://res.cloudinary.com/echoshare/image/upload/v1634132726/productImgs/799-7998561_add-photo-placeholder-north-luwu-regency_qb0eii.jpg"!==E){n.next=4;break}return console.log("You must upload a photo"),n.abrupt("return");case 4:return a={firstName:c.firstName,lastName:c.lastName,image:E,company:e.companyId},console.log(a),n.next=8,p.a.awrap(_.addEmployee(a));case 8:n.sent,e.handleClose();case 10:case"end":return n.stop()}}))}},r.a.createElement("input",{minLength:"5",required:!0,type:"text",name:"firstName",value:c.firstName,placeholder:"Employee First Name",onChange:d}),r.a.createElement("input",{minLength:"5",required:!0,type:"text",name:"lastName",value:c.lastName,placeholder:"Employee Last Name",onChange:d}),r.a.createElement("label",null,r.a.createElement("div",{className:"img-upload"},r.a.createElement("img",{className:"primary-img",src:E})),r.a.createElement("input",{hidden:!0,onChange:function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.persist(),m(!0),a.next=4,p.a.awrap(M(e));case 4:t=a.sent,v(t),m(!1);case 7:case"end":return a.stop()}}))},type:"file"})),r.a.createElement("input",Object(T.a)({type:"text",disabled:i,name:"company-name",value:e.company},"disabled",!0)),r.a.createElement("button",null,"Add"))))};function W(e){var t=e.emp;return(r.a.createElement("tr",null,r.a.createElement("td",null,t.firstName),r.a.createElement("td",null,t.lastName),r.a.createElement("td",{className:"image-cell"},r.a.createElement("img",{src:t.image,alt:"profile",className:"employee-card-img"})," "),r.a.createElement("td",null,r.a.createElement("button",null,r.a.createElement("img",{src:"https://res.cloudinary.com/echoshare/image/upload/v1636982096/Edit_icon__the_Noun_Project_30184_.svg_lvvq3f.png"})),r.a.createElement("button",null,r.a.createElement("img",{src:"https://res.cloudinary.com/echoshare/image/upload/v1636983047/cross-in-circle-in-red-tom-hill-transparent_qohafi.png"})))))}var G=function(e){var t=e.employees;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-header"},r.a.createElement("table",{cellPadding:"0",cellSpacing:"0",border:"0"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First Name"),r.a.createElement("th",null,"Last Name"),r.a.createElement("th",null,"Profile Photo"),r.a.createElement("th",null,"Actions"))))),r.a.createElement("div",{className:"table-content"},r.a.createElement("table",{cellSpacing:"0",cellPadding:"0",border:"0"},r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(W,{key:e._id,emp:e})}))))))},Y=function(e){Object(u.f)();var t=Object(n.useContext)(i),a=t.loggedCompany,c=(t.setLoggedCompany,Object(n.useState)(!1)),o=Object(l.a)(c,2),s=o[0],m=o[1],d=function(){m(!s)},g=Object(n.useState)(null),f=Object(l.a)(g,2),E=f[0],v=f[1];return Object(n.useEffect)((function(){!function(){var e;p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,p.a.awrap(_.getAllEmployeesInCompany(a.id));case 4:e=t.sent,console.log(e,"res"),v(e);case 7:case"end":return t.stop()}}))}()}),[a]),a?r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(V,{companyId:a.id,company:a.name,handleClose:d}),r.a.createElement("div",{className:"profile-container"},r.a.createElement("img",{src:a.logo})),r.a.createElement("button",{onClick:d}," Add new Employee"),r.a.createElement("button",null,"Add Bulk Employees"),E?r.a.createElement(G,{employees:E}):r.a.createElement("div",null,"LOADING")):r.a.createElement("div",null,"Loading...")};function $(e){var t=Object(n.useContext)(i).loggedCompany;Object(n.useEffect)((function(){}),[t]);x.a.get("loggedCompany");return r.a.createElement("div",{className:"header"},r.a.createElement(s.b,{to:"/"},r.a.createElement("img",{src:t?t.logo:"https://res.cloudinary.com/echoshare/image/upload/v1636287815/echo_icon_q1hjeb.png"})),t&&r.a.createElement("div",{className:"company-name"},t.name),r.a.createElement("div",{className:"links"},t&&r.a.createElement(s.b,{activeClassName:"active",to:"/company",exact:!0},"Company Profile"),t&&r.a.createElement(s.b,{activeClassName:"active",to:"/board"},"Board"),!t&&r.a.createElement(s.b,{activeClassName:"active",to:"/login"},"Sign In"),r.a.createElement(s.b,{activeClassName:"active",to:"/about"},"About")))}var z=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){if(!a&&x.a.get("loggedCompany")){var e=x.a.get("loggedCompany").slice(2);c(JSON.parse(e))}}),[a]),r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(i.Provider,{value:{loggedCompany:a,setLoggedCompany:c}},r.a.createElement($,null),r.a.createElement("div",{className:"content"},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",component:I,exact:!0}),r.a.createElement(u.a,{path:"/login",component:J}),r.a.createElement(u.a,{path:"/board",component:D}),r.a.createElement(u.a,{path:"/company",component:Y}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(135);o.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},21:function(e,t,a){var n=function(e){try{return a(90)("./".concat(e))}catch(t){if("MODULE_NOT_FOUND"===t.code)throw Error("Incorrect ENVIRONMENT variable set, exiting\nAllowed Environments:\n1. dev\n2. prod")}}(Object({NODE_ENV:"production",PUBLIC_URL:""}).ENVIRONMENT||"dev");e.exports=n},48:function(e,t){e.exports={baseURL:"http://localhost:4444"}},49:function(e,t){e.exports={baseURL:"https://presence-board-echo.herokuapp.com"}},67:function(e,t,a){e.exports=a(136)},90:function(e,t,a){var n={"./":21,"./dev":48,"./dev.js":48,"./index":21,"./index.js":21,"./prod":49,"./prod.js":49};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=90}},[[67,1,2]]]);
//# sourceMappingURL=main.dbe7990e.chunk.js.map